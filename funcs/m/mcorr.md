# mcorr

## 语法

`mcorr(X, Y, window, [minPeriods])`

窗口计算规则请参考：[mFunctions](../themes/mFunctions.md)

## 参数

**X** 是一个向量/矩阵/表/由等长向量组成的元组。其中，mmse, mslr 仅支持输入向量。

**Y** 是一个向量/矩阵/表/由等长向量组成的元组。其中，mmse, mslr 仅支持输入向量。

**window** 是大于等于 2 的正整型或 DURATION 标量。表示滑动窗口的长度。

注： 在流计算引擎中调用滑动窗口函数时，window 的上限为 102400。

**minPeriods** 是一个正整数。为滑动窗口中最少包含的观测值数据。

## 详情

在给定长度（以元素个数或时间长度衡量）的滑动窗口内，计算 *X* 和 *Y* 元素的相关性。

## 例子

```
x=1..8
y=9 5 3 4 5 4 7 1
mcorr(x,y,5);

[,,,,-0.624038,0,0.834058,-0.29173]
// output

mcorr(x,y,5,3);
// output
[,,-0.981981,-0.834497,-0.624038,0,0.834058,-0.29173]

x1 = indexedSeries(date(2020.06.05)+1..8, x)
y1 = indexedSeries(date(2020.06.05)+1..6 join 2020.06.15 join 2020.06.16, y)
mcorr(x1,y1,5d)
```

| label | col1 |
| --- | --- |
| 2020.06.06 |  |
| 2020.06.07 | -1 |
| 2020.06.08 | -0.982 |
| 2020.06.09 | -0.8345 |
| 2020.06.10 | -0.624 |
| 2020.06.11 | 0 |
| 2020.06.12 | 0.6325 |
| 2020.06.13 | 0 |

```
mcorr(x1,y1,1w)
```

| label | col1 |
| --- | --- |
| 2020.06.06 |  |
| 2020.06.07 | -1 |
| 2020.06.08 | -0.982 |
| 2020.06.09 | -0.8345 |
| 2020.06.10 | -0.624 |
| 2020.06.11 | -0.6116 |
| 2020.06.12 | -0.6116 |
| 2020.06.13 | 0 |

相关函数：[corr](../c/corr.md), [mmin](mmin.md), [mmax](mmax.md), [mavg](mavg.md), [msum](msum.md), [mstd](mstd.md), [mvar](mvar.md)

